<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>常用插件 | 我的文档地址</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="在线文档地址">
    
    <link rel="preload" href="/vue-preess/assets/css/0.styles.a7b65f9e.css" as="style"><link rel="preload" href="/vue-preess/assets/js/app.19476c11.js" as="script"><link rel="preload" href="/vue-preess/assets/js/2.f3b333de.js" as="script"><link rel="preload" href="/vue-preess/assets/js/1.f574d6f5.js" as="script"><link rel="preload" href="/vue-preess/assets/js/44.24cbf576.js" as="script"><link rel="prefetch" href="/vue-preess/assets/js/10.1f88676b.js"><link rel="prefetch" href="/vue-preess/assets/js/11.55ba53f7.js"><link rel="prefetch" href="/vue-preess/assets/js/12.ce5c7d6f.js"><link rel="prefetch" href="/vue-preess/assets/js/13.1ee92742.js"><link rel="prefetch" href="/vue-preess/assets/js/14.ccf0f713.js"><link rel="prefetch" href="/vue-preess/assets/js/15.b9ea491a.js"><link rel="prefetch" href="/vue-preess/assets/js/16.4ad6e081.js"><link rel="prefetch" href="/vue-preess/assets/js/17.a554319d.js"><link rel="prefetch" href="/vue-preess/assets/js/18.f5513c91.js"><link rel="prefetch" href="/vue-preess/assets/js/19.17eb6035.js"><link rel="prefetch" href="/vue-preess/assets/js/20.2f27fd7b.js"><link rel="prefetch" href="/vue-preess/assets/js/21.bc813914.js"><link rel="prefetch" href="/vue-preess/assets/js/22.960cb455.js"><link rel="prefetch" href="/vue-preess/assets/js/23.033014fe.js"><link rel="prefetch" href="/vue-preess/assets/js/24.9926cf9a.js"><link rel="prefetch" href="/vue-preess/assets/js/25.1697aa0f.js"><link rel="prefetch" href="/vue-preess/assets/js/26.c4b1dabd.js"><link rel="prefetch" href="/vue-preess/assets/js/27.a545f9cb.js"><link rel="prefetch" href="/vue-preess/assets/js/28.8504d86f.js"><link rel="prefetch" href="/vue-preess/assets/js/29.e9e58762.js"><link rel="prefetch" href="/vue-preess/assets/js/3.024324e3.js"><link rel="prefetch" href="/vue-preess/assets/js/30.63ef17be.js"><link rel="prefetch" href="/vue-preess/assets/js/31.510bf205.js"><link rel="prefetch" href="/vue-preess/assets/js/32.dc0d5f0b.js"><link rel="prefetch" href="/vue-preess/assets/js/33.5bbba8e8.js"><link rel="prefetch" href="/vue-preess/assets/js/34.c2d25fb7.js"><link rel="prefetch" href="/vue-preess/assets/js/35.f999ee97.js"><link rel="prefetch" href="/vue-preess/assets/js/36.227d6bcd.js"><link rel="prefetch" href="/vue-preess/assets/js/37.75f2b4fe.js"><link rel="prefetch" href="/vue-preess/assets/js/38.1b42442b.js"><link rel="prefetch" href="/vue-preess/assets/js/39.25bccaaf.js"><link rel="prefetch" href="/vue-preess/assets/js/4.4a252247.js"><link rel="prefetch" href="/vue-preess/assets/js/40.159143f5.js"><link rel="prefetch" href="/vue-preess/assets/js/41.d603584d.js"><link rel="prefetch" href="/vue-preess/assets/js/42.ef442d3a.js"><link rel="prefetch" href="/vue-preess/assets/js/43.f7130bae.js"><link rel="prefetch" href="/vue-preess/assets/js/45.bc0671c8.js"><link rel="prefetch" href="/vue-preess/assets/js/46.b8e4cd12.js"><link rel="prefetch" href="/vue-preess/assets/js/47.4b2b7cb1.js"><link rel="prefetch" href="/vue-preess/assets/js/5.0aba521d.js"><link rel="prefetch" href="/vue-preess/assets/js/6.ef6a8bc7.js"><link rel="prefetch" href="/vue-preess/assets/js/7.d99d4d7f.js"><link rel="prefetch" href="/vue-preess/assets/js/vendors~docsearch.bdc2fb18.js">
    <link rel="stylesheet" href="/vue-preess/assets/css/0.styles.a7b65f9e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vue-preess/" class="home-link router-link-active"><!----> <span class="site-name">我的文档地址</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vue-preess/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础知识" class="dropdown-title"><span class="title">基础知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="基础知识" class="mobile-dropdown-title"><span class="title">基础知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          EcmaScript标准语法
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vue-preess/base/EcmaScript/reg.html" class="nav-link">
  正则
</a></li><li class="dropdown-subitem"><a href="/vue-preess/base/EcmaScript/arr.html" class="nav-link">
  数组
</a></li><li class="dropdown-subitem"><a href="/vue-preess/base/EcmaScript/object.html" class="nav-link">
  对象
</a></li><li class="dropdown-subitem"><a href="/vue-preess/base/EcmaScript/str.html" class="nav-link">
  字符串
</a></li><li class="dropdown-subitem"><a href="/vue-preess/base/EcmaScript/promise.html" class="nav-link">
  promise
</a></li><li class="dropdown-subitem"><a href="/vue-preess/base/EcmaScript/this.html" class="nav-link">
  this指向
</a></li><li class="dropdown-subitem"><a href="/vue-preess/base/EcmaScript/prototype.html" class="nav-link">
  原型链
</a></li></ul></li><li class="dropdown-item"><h4>
          WebApi
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vue-preess/base/WebApi/window.html" class="nav-link">
  api记录
</a></li><li class="dropdown-subitem"><a href="/vue-preess/base/WebApi/css.html" class="nav-link">
  css新特性
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="跨端" class="dropdown-title"><span class="title">跨端</span> <span class="arrow down"></span></button> <button type="button" aria-label="跨端" class="mobile-dropdown-title"><span class="title">跨端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue-preess/cross/uniApp.html" class="nav-link">
  uniApp
</a></li><li class="dropdown-item"><!----> <a href="/vue-preess/cross/electron.html" class="nav-link">
  electron
</a></li></ul></div></div><div class="nav-item"><a href="/vue-preess/plugin/plugin.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  常用插件
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="常用配置" class="dropdown-title"><span class="title">常用配置</span> <span class="arrow down"></span></button> <button type="button" aria-label="常用配置" class="mobile-dropdown-title"><span class="title">常用配置</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue-preess/config/vite-config.html" class="nav-link">
  vite常用配置
</a></li><li class="dropdown-item"><!----> <a href="/vue-preess/config/tailwindcss.html" class="nav-link">
  tailwindcss的配置
</a></li><li class="dropdown-item"><!----> <a href="/vue-preess/config/nodemon.html" class="nav-link">
  nodemon配置
</a></li><li class="dropdown-item"><!----> <a href="/vue-preess/config/git.html" class="nav-link">
  git
</a></li><li class="dropdown-item"><!----> <a href="/vue-preess/config/vscode.html" class="nav-link">
  vscode
</a></li><li class="dropdown-item"><!----> <a href="/vue-preess/config/monorepo.html" class="nav-link">
  monorepo
</a></li><li class="dropdown-item"><!----> <a href="/vue-preess/config/prisma.html" class="nav-link">
  prisma
</a></li><li class="dropdown-item"><!----> <a href="/vue-preess/config/three.html" class="nav-link">
  three
</a></li><li class="dropdown-item"><!----> <a href="/vue-preess/config/nest.html" class="nav-link">
  nest
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="node" class="dropdown-title"><span class="title">node</span> <span class="arrow down"></span></button> <button type="button" aria-label="node" class="mobile-dropdown-title"><span class="title">node</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue-preess/node/node.html" class="nav-link">
  node知识
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="题库" class="dropdown-title"><span class="title">题库</span> <span class="arrow down"></span></button> <button type="button" aria-label="题库" class="mobile-dropdown-title"><span class="title">题库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue-preess/question/base.html" class="nav-link">
  基础问题
</a></li><li class="dropdown-item"><!----> <a href="/vue-preess/question/AI.html" class="nav-link">
  AI
</a></li><li class="dropdown-item"><!----> <a href="/vue-preess/question/langchain.html" class="nav-link">
  langchain
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/vue-preess/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础知识" class="dropdown-title"><span class="title">基础知识</span> <span class="arrow down"></span></button> <button type="button" aria-label="基础知识" class="mobile-dropdown-title"><span class="title">基础知识</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          EcmaScript标准语法
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vue-preess/base/EcmaScript/reg.html" class="nav-link">
  正则
</a></li><li class="dropdown-subitem"><a href="/vue-preess/base/EcmaScript/arr.html" class="nav-link">
  数组
</a></li><li class="dropdown-subitem"><a href="/vue-preess/base/EcmaScript/object.html" class="nav-link">
  对象
</a></li><li class="dropdown-subitem"><a href="/vue-preess/base/EcmaScript/str.html" class="nav-link">
  字符串
</a></li><li class="dropdown-subitem"><a href="/vue-preess/base/EcmaScript/promise.html" class="nav-link">
  promise
</a></li><li class="dropdown-subitem"><a href="/vue-preess/base/EcmaScript/this.html" class="nav-link">
  this指向
</a></li><li class="dropdown-subitem"><a href="/vue-preess/base/EcmaScript/prototype.html" class="nav-link">
  原型链
</a></li></ul></li><li class="dropdown-item"><h4>
          WebApi
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/vue-preess/base/WebApi/window.html" class="nav-link">
  api记录
</a></li><li class="dropdown-subitem"><a href="/vue-preess/base/WebApi/css.html" class="nav-link">
  css新特性
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="跨端" class="dropdown-title"><span class="title">跨端</span> <span class="arrow down"></span></button> <button type="button" aria-label="跨端" class="mobile-dropdown-title"><span class="title">跨端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue-preess/cross/uniApp.html" class="nav-link">
  uniApp
</a></li><li class="dropdown-item"><!----> <a href="/vue-preess/cross/electron.html" class="nav-link">
  electron
</a></li></ul></div></div><div class="nav-item"><a href="/vue-preess/plugin/plugin.html" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  常用插件
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="常用配置" class="dropdown-title"><span class="title">常用配置</span> <span class="arrow down"></span></button> <button type="button" aria-label="常用配置" class="mobile-dropdown-title"><span class="title">常用配置</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue-preess/config/vite-config.html" class="nav-link">
  vite常用配置
</a></li><li class="dropdown-item"><!----> <a href="/vue-preess/config/tailwindcss.html" class="nav-link">
  tailwindcss的配置
</a></li><li class="dropdown-item"><!----> <a href="/vue-preess/config/nodemon.html" class="nav-link">
  nodemon配置
</a></li><li class="dropdown-item"><!----> <a href="/vue-preess/config/git.html" class="nav-link">
  git
</a></li><li class="dropdown-item"><!----> <a href="/vue-preess/config/vscode.html" class="nav-link">
  vscode
</a></li><li class="dropdown-item"><!----> <a href="/vue-preess/config/monorepo.html" class="nav-link">
  monorepo
</a></li><li class="dropdown-item"><!----> <a href="/vue-preess/config/prisma.html" class="nav-link">
  prisma
</a></li><li class="dropdown-item"><!----> <a href="/vue-preess/config/three.html" class="nav-link">
  three
</a></li><li class="dropdown-item"><!----> <a href="/vue-preess/config/nest.html" class="nav-link">
  nest
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="node" class="dropdown-title"><span class="title">node</span> <span class="arrow down"></span></button> <button type="button" aria-label="node" class="mobile-dropdown-title"><span class="title">node</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue-preess/node/node.html" class="nav-link">
  node知识
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="题库" class="dropdown-title"><span class="title">题库</span> <span class="arrow down"></span></button> <button type="button" aria-label="题库" class="mobile-dropdown-title"><span class="title">题库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue-preess/question/base.html" class="nav-link">
  基础问题
</a></li><li class="dropdown-item"><!----> <a href="/vue-preess/question/AI.html" class="nav-link">
  AI
</a></li><li class="dropdown-item"><!----> <a href="/vue-preess/question/langchain.html" class="nav-link">
  langchain
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/vue-preess/plugin/plugin.html" aria-current="page" class="active sidebar-link">常用插件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue-preess/plugin/plugin.html#vue数据缓存" class="sidebar-link">vue数据缓存</a></li><li class="sidebar-sub-header"><a href="/vue-preess/plugin/plugin.html#h5文件下载" class="sidebar-link">h5文件下载</a></li><li class="sidebar-sub-header"><a href="/vue-preess/plugin/plugin.html#富文本编译器" class="sidebar-link">富文本编译器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue-preess/plugin/plugin.html#vue2" class="sidebar-link">vue2</a></li><li class="sidebar-sub-header"><a href="/vue-preess/plugin/plugin.html#vue3" class="sidebar-link">vue3</a></li><li class="sidebar-sub-header"><a href="/vue-preess/plugin/plugin.html#vue2使用富文本" class="sidebar-link">vue2使用富文本</a></li><li class="sidebar-sub-header"><a href="/vue-preess/plugin/plugin.html#vue3使用富文本" class="sidebar-link">vue3使用富文本</a></li></ul></li><li class="sidebar-sub-header"><a href="/vue-preess/plugin/plugin.html#vueuse" class="sidebar-link">vueUse</a></li><li class="sidebar-sub-header"><a href="/vue-preess/plugin/plugin.html#图片预览" class="sidebar-link">图片预览</a></li><li class="sidebar-sub-header"><a href="/vue-preess/plugin/plugin.html#时间处理" class="sidebar-link">时间处理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue-preess/plugin/plugin.html#moment" class="sidebar-link">moment</a></li><li class="sidebar-sub-header"><a href="/vue-preess/plugin/plugin.html#day-js" class="sidebar-link">Day.js</a></li></ul></li><li class="sidebar-sub-header"><a href="/vue-preess/plugin/plugin.html#西瓜视频" class="sidebar-link">西瓜视频</a></li><li class="sidebar-sub-header"><a href="/vue-preess/plugin/plugin.html#peer-js" class="sidebar-link">peer.js</a></li><li class="sidebar-sub-header"><a href="/vue-preess/plugin/plugin.html#ppt插件" class="sidebar-link">PPT插件</a></li><li class="sidebar-sub-header"><a href="/vue-preess/plugin/plugin.html#二维码生成" class="sidebar-link">二维码生成</a></li><li class="sidebar-sub-header"><a href="/vue-preess/plugin/plugin.html#html转换为canvas" class="sidebar-link">html转换为canvas</a></li><li class="sidebar-sub-header"><a href="/vue-preess/plugin/plugin.html#组织树" class="sidebar-link">组织树</a></li><li class="sidebar-sub-header"><a href="/vue-preess/plugin/plugin.html#文件预览-pdf、excel、world" class="sidebar-link">文件预览（pdf、excel、world）</a></li><li class="sidebar-sub-header"><a href="/vue-preess/plugin/plugin.html#流程图" class="sidebar-link">流程图</a></li><li class="sidebar-sub-header"><a href="/vue-preess/plugin/plugin.html#讯飞插件" class="sidebar-link">讯飞插件</a></li><li class="sidebar-sub-header"><a href="/vue-preess/plugin/plugin.html#connect-camera" class="sidebar-link">Connect Camera</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="常用插件"><a href="#常用插件" class="header-anchor">#</a> 常用插件</h1> <h2 id="vue数据缓存"><a href="#vue数据缓存" class="header-anchor">#</a> vue数据缓存</h2> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">pnpm</span> i pinia-plugin-persistedstate
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 来到main.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>createPinia<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'pinia'</span>
<span class="token keyword">import</span> piniaPluginPersistedstate <span class="token keyword">from</span> <span class="token string">'pinia-plugin-persistedstate'</span>

<span class="token keyword">const</span> pinia <span class="token operator">=</span> <span class="token function">createPinia</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
pinia<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>piniaPluginPersistedstate<span class="token punctuation">)</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 来到你的store、之后不在需要由你控制、自动帮你缓存</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>defineStore<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'pinia'</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> useStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">'store'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function-variable function">state</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">someState</span><span class="token operator">:</span> <span class="token string">'hello pinia'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">persist</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">storage</span><span class="token operator">:</span> sessionStorage<span class="token punctuation">,</span>
    <span class="token literal-property property">paths</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'someState'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="h5文件下载"><a href="#h5文件下载" class="header-anchor">#</a> h5文件下载</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> FileSaver <span class="token keyword">from</span> <span class="token string">&quot;file-saver&quot;</span><span class="token punctuation">;</span>

FileSaver<span class="token punctuation">.</span><span class="token function">saveAs</span><span class="token punctuation">(</span>blob对象 <span class="token operator">|</span> 地址<span class="token punctuation">,</span> 它的名字是什么<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="富文本编译器"><a href="#富文本编译器" class="header-anchor">#</a> 富文本编译器</h2> <h3 id="vue2"><a href="#vue2" class="header-anchor">#</a> vue2</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">yarn</span> <span class="token function">add</span> @wangeditor/editor-for-vue
</code></pre></div><h3 id="vue3"><a href="#vue3" class="header-anchor">#</a> vue3</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">yarn</span> <span class="token function">add</span> @wangeditor/editor-for-vue@next
</code></pre></div><p>提供大量方法、同时支持vue2、vue3、react  <a href="https://www.wangeditor.com/" target="_blank" rel="noopener noreferrer">gitHub:地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="vue2使用富文本"><a href="#vue2使用富文本" class="header-anchor">#</a> vue2使用富文本</h3> <div class="language-vue extra-class"><pre class="language-vue"><code>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Toolbar</span>
        <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">border-bottom</span><span class="token punctuation">:</span> 1px solid #ccc</span><span class="token punctuation">&quot;</span></span></span>
        <span class="token attr-name">:editor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>editor<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:defaultConfig</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>toolbarConfig<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mode<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Editor</span>
        <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">min-height</span><span class="token punctuation">:</span> 345px<span class="token punctuation">;</span><span class="token property">max-height</span><span class="token punctuation">:</span> 345px<span class="token punctuation">;</span>  <span class="token property">overflow-y</span><span class="token punctuation">:</span> auto</span><span class="token punctuation">&quot;</span></span></span>
        <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>form.noticeContent<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">@onDestroyed</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onDestroyed<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:defaultConfig</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>editorConfig<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mode<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">@onCreated</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onCreated<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">/&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span>Editor<span class="token punctuation">,</span> Toolbar<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@wangeditor/editor-for-vue'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token comment">// 富文本配置</span>
      <span class="token literal-property property">editor</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
      <span class="token literal-property property">toolbarConfig</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">excludeKeys</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'fullScreen'</span><span class="token punctuation">,</span> <span class="token string">'insertLink'</span><span class="token punctuation">,</span> <span class="token string">'group-video'</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">form</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">noticeContent</span><span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">editorConfig</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">placeholder</span><span class="token operator">:</span> <span class="token string">'请输入内容...'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">scroll</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        <span class="token constant">MENU_CONF</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">server</span><span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
          <span class="token string-property property">'uploadImage'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token literal-property property">fieldName</span><span class="token operator">:</span> <span class="token string">'file'</span><span class="token punctuation">,</span>
            <span class="token literal-property property">maxFileSize</span><span class="token operator">:</span> <span class="token number">10</span> <span class="token operator">*</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">,</span>
            <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token literal-property property">Authorization</span><span class="token operator">:</span> <span class="token keyword">undefined</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
            <span class="token literal-property property">customInsert</span><span class="token operator">:</span> <span class="token keyword">undefined</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">mode</span><span class="token operator">:</span> <span class="token string">'default'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    Editor<span class="token punctuation">,</span>
    Toolbar
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">beforeDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>editor <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>editor<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 组件销毁时，及时销毁编辑器</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 设置富文本</span>
    <span class="token function">setEditorConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 你的服务器地址</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>editorConfig<span class="token punctuation">.</span><span class="token constant">MENU_CONF</span><span class="token punctuation">.</span>uploadImage<span class="token punctuation">.</span>server <span class="token operator">=</span> server<span class="token punctuation">.</span>api<span class="token punctuation">.</span>file<span class="token punctuation">.</span>upload<span class="token punctuation">;</span>
      <span class="token comment">// 设置token</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>editorConfig<span class="token punctuation">.</span><span class="token constant">MENU_CONF</span><span class="token punctuation">.</span>uploadImage<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>Authorization <span class="token operator">=</span> <span class="token string">'Bearer'</span> <span class="token operator">+</span> <span class="token string">''</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>accessToken<span class="token punctuation">;</span>
      <span class="token comment">// 设置图片插入函数</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>editorConfig<span class="token punctuation">.</span><span class="token constant">MENU_CONF</span><span class="token punctuation">.</span>uploadImage<span class="token punctuation">.</span>customInsert <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>customInsert<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 初始化富文本</span>
    <span class="token function">onCreated</span><span class="token punctuation">(</span><span class="token parameter">editor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>editor <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">seal</span><span class="token punctuation">(</span>editor<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 自动聚焦</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>editor<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 销毁富文本</span>
    <span class="token function">onDestroyed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>editor <span class="token operator">===</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>editor<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 插入函数</span>
    <span class="token function">customInsert</span><span class="token punctuation">(</span><span class="token parameter">responseBody<span class="token punctuation">,</span> insertFn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> url <span class="token operator">=</span> responseBody<span class="token punctuation">.</span>data<span class="token punctuation">.</span>bucketName <span class="token operator">+</span> <span class="token string">'-'</span> <span class="token operator">+</span> responseBody<span class="token punctuation">.</span>data<span class="token punctuation">.</span>fileName
      <span class="token function">insertFn</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="vue3使用富文本"><a href="#vue3使用富文本" class="header-anchor">#</a> vue3使用富文本</h3> <div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">setup</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ts<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> <span class="token punctuation">{</span> Editor<span class="token punctuation">,</span> Toolbar <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@wangeditor/editor-for-vue'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useAuthStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/store'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> fileDownloadUrl <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/api'</span>

<span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token function">defineProps</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">htmlContent</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
    <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
    <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">projectId</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
    <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
    <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">isDisabled</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
    <span class="token keyword">default</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">width</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">type</span><span class="token operator">:</span> String<span class="token punctuation">,</span>
    <span class="token keyword">default</span><span class="token operator">:</span> <span class="token string">'100%'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">required</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> authStore <span class="token operator">=</span> <span class="token function">useAuthStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 编辑器实例，必须用 shallowRef，重要！</span>
<span class="token keyword">const</span> editorRef <span class="token operator">=</span> <span class="token function">shallowRef</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> insertImage <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment">// 内容 HTML</span>
<span class="token keyword">const</span> valueHtml <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>

<span class="token comment">// 添加一个提取图片 src 的函数</span>
<span class="token keyword">function</span> <span class="token function">extractImageSrcs</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">htmlContent</span><span class="token operator">:</span> string</span><span class="token punctuation">)</span><span class="token operator">:</span> string<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> imgRegex <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">&lt;img[^&gt;]+src=&quot;([^&quot;&gt;]+)&quot;</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span>
  <span class="token keyword">const</span> <span class="token literal-property property">srcs</span><span class="token operator">:</span> string<span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

  <span class="token keyword">const</span> matches <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>htmlContent<span class="token punctuation">.</span><span class="token function">matchAll</span><span class="token punctuation">(</span>imgRegex<span class="token punctuation">)</span><span class="token punctuation">)</span>

  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> match <span class="token keyword">of</span> matches<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// match[1] 包含 src 的值</span>
    <span class="token keyword">const</span> src <span class="token operator">=</span> match<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
    <span class="token comment">// 只获取文件名部分 (download/ 后面的部分)</span>
    <span class="token keyword">const</span> fileName <span class="token operator">=</span> src<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'download/'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>fileName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      srcs<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>fileName<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> srcs
<span class="token punctuation">}</span>

<span class="token function">watch</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> props<span class="token punctuation">.</span>htmlContent<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">newVal</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>newVal<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      valueHtml<span class="token punctuation">.</span>value <span class="token operator">=</span> newVal
      <span class="token keyword">if</span> <span class="token punctuation">(</span>props<span class="token punctuation">.</span>isDisabled<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span>
      <span class="token punctuation">}</span>
      <span class="token comment">// 获取所有图片的 src</span>
      <span class="token keyword">const</span> imageSrcs <span class="token operator">=</span> <span class="token function">extractImageSrcs</span><span class="token punctuation">(</span>newVal<span class="token punctuation">)</span>
      <span class="token comment">// 更新已插入图片列表</span>
      insertImage<span class="token punctuation">.</span>value <span class="token operator">=</span> imageSrcs<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">src</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token literal-property property">src</span><span class="token operator">:</span> fileDownloadUrl<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'{fileName}'</span><span class="token punctuation">,</span> src<span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">immediate</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token literal-property property">deep</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>

<span class="token function">watch</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> props<span class="token punctuation">.</span>isDisabled<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">newDisabled</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">setDisabled</span><span class="token punctuation">(</span>newDisabled<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token literal-property property">flush</span><span class="token operator">:</span> <span class="token string">'post'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">deep</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>

<span class="token comment">// 编辑器配置</span>
<span class="token keyword">const</span> editorConfig <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">placeholder</span><span class="token operator">:</span> <span class="token string">'请输入内容...'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">scroll</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  <span class="token constant">MENU_CONF</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">uploadImage</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">server</span><span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span> <span class="token comment">// 初始为空</span>
      <span class="token literal-property property">fieldName</span><span class="token operator">:</span> <span class="token string">'file'</span><span class="token punctuation">,</span>
      <span class="token literal-property property">maxFileSize</span><span class="token operator">:</span> <span class="token number">10</span> <span class="token operator">*</span> <span class="token number">1024</span> <span class="token operator">*</span> <span class="token number">1024</span><span class="token punctuation">,</span>
      <span class="token literal-property property">headers</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">Authorization</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Bearer </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>authStore<span class="token punctuation">.</span>accessToken<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      customInsert<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">insertImage</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token function">onInsertedImage</span><span class="token punctuation">(</span><span class="token parameter">imageNode</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>imageNode<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span>
        <span class="token punctuation">}</span>
        insertImage<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>imageNode<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 监听 projectId 变化</span>
<span class="token function">watch</span><span class="token punctuation">(</span>
  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> props<span class="token punctuation">.</span>projectId<span class="token punctuation">,</span>
  <span class="token punctuation">(</span><span class="token parameter">newProjectId</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>newProjectId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      editorConfig<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token constant">MENU_CONF</span><span class="token punctuation">.</span>uploadImage<span class="token punctuation">.</span>server <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/api/file/project/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>newProjectId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/upload</span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span> <span class="token literal-property property">immediate</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">handleCreated</span><span class="token punctuation">(</span><span class="token parameter">editor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  editorRef<span class="token punctuation">.</span>value <span class="token operator">=</span> editor <span class="token comment">// 记录 editor 实例，重要！</span>
  <span class="token function">setDisabled</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>isDisabled<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">setDisabled</span><span class="token punctuation">(</span><span class="token parameter">disabled</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>disabled<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    editorRef<span class="token punctuation">.</span>value<span class="token operator">?.</span><span class="token function">disable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">else</span> <span class="token punctuation">{</span>
    editorRef<span class="token punctuation">.</span>value<span class="token operator">?.</span><span class="token function">enable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> toolbarConfig <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">excludeKeys</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'fullScreen'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">customInsert</span><span class="token punctuation">(</span><span class="token parameter">responseBody<span class="token punctuation">,</span> insertFn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> saveName <span class="token operator">=</span> responseBody<span class="token punctuation">.</span>data<span class="token punctuation">.</span>saveName
  <span class="token keyword">const</span> url <span class="token operator">=</span> fileDownloadUrl<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'{fileName}'</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>saveName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
  <span class="token function">insertFn</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">destroyEditor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> editor <span class="token operator">=</span> editorRef<span class="token punctuation">.</span>value
  <span class="token keyword">if</span> <span class="token punctuation">(</span>editor <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span>
  editor<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">getHtmlContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 获取当前编辑器中的所有剩下图片</span>
  <span class="token keyword">const</span> currentImages <span class="token operator">=</span> editorRef<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">getElemsByType</span><span class="token punctuation">(</span><span class="token string">'image'</span><span class="token punctuation">)</span>
  <span class="token comment">// 找出在 insertImage 中但不在当前编辑器中的图片，这些就是被删除的图片</span>
  <span class="token keyword">const</span> deleteImages <span class="token operator">=</span> insertImage<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>
    <span class="token parameter">insertedImg</span> <span class="token operator">=&gt;</span>
      <span class="token operator">!</span>currentImages<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span><span class="token parameter">currentImg</span> <span class="token operator">=&gt;</span> currentImg<span class="token punctuation">.</span>src <span class="token operator">===</span> insertedImg<span class="token punctuation">.</span>src<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">)</span>
  <span class="token comment">// 得到最终的src 并只要download/后面的地址</span>
  <span class="token keyword">const</span> finalSrc <span class="token operator">=</span> deleteImages<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span>src<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'download/'</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">html</span><span class="token operator">:</span> valueHtml<span class="token punctuation">.</span>value<span class="token punctuation">,</span>
    <span class="token literal-property property">deleteImages</span><span class="token operator">:</span> finalSrc<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token function">defineExpose</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  destroyEditor<span class="token punctuation">,</span>
  getHtmlContent<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 组件销毁时，及时销毁编辑器</span>
<span class="token function">onBeforeUnmount</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">destroyEditor</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>h-full w-full flex flex-col<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{ width: props.width }<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>h-full w-full flex flex-col<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">border</span><span class="token punctuation">:</span> 1px solid #ccc</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
      <span class="token comment">&lt;!-- 工具栏 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Toolbar</span>
        <span class="token attr-name">:editor</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>editorRef<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:default-config</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>toolbarConfig<span class="token punctuation">&quot;</span></span>
        <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">border-bottom</span><span class="token punctuation">:</span> 1px solid #ccc</span><span class="token punctuation">&quot;</span></span></span>
        <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>default<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">/&gt;</span></span>
      <span class="token comment">&lt;!-- 编辑器 --&gt;</span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Editor</span>
        <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>valueHtml<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">:default-config</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>editorConfig<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">mode</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>default<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>flex-1 overflow-y-auto<span class="token punctuation">&quot;</span></span>
        <span class="token attr-name">@on-created</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>handleCreated<span class="token punctuation">&quot;</span></span>
      <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token comment">&lt;!-- 别忘了引入样式 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>@wangeditor/editor/dist/css/style.css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">.w-e-text-container</span> <span class="token punctuation">{</span>
  <span class="token property">overflow</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">html.dark</span> <span class="token punctuation">{</span>
  <span class="token comment">/* 工具栏背景色 */</span>
  <span class="token property">--w-e-toolbar-bg-color</span><span class="token punctuation">:</span> #1a202c<span class="token punctuation">;</span>

  <span class="token comment">/* 工具栏文字颜色 */</span>
  <span class="token property">--w-e-toolbar-color</span><span class="token punctuation">:</span> #e2e8f0<span class="token punctuation">;</span>

  <span class="token comment">/* 工具栏激活状态的颜色 */</span>
  <span class="token property">--w-e-toolbar-active-color</span><span class="token punctuation">:</span> #60a5fa<span class="token punctuation">;</span>

  <span class="token comment">/* 工具栏激活状态的背景色 */</span>
  <span class="token property">--w-e-toolbar-active-bg-color</span><span class="token punctuation">:</span> #2d3748<span class="token punctuation">;</span>

  <span class="token comment">/* 工具栏禁用状态的颜色 */</span>
  <span class="token property">--w-e-toolbar-disabled-color</span><span class="token punctuation">:</span> #6b7280<span class="token punctuation">;</span>

  <span class="token comment">/* 工具栏边框颜色 */</span>
  <span class="token property">--w-e-toolbar-border-color</span><span class="token punctuation">:</span> #4a5568<span class="token punctuation">;</span>

  <span class="token comment">/* 编辑区域背景色 */</span>
  <span class="token property">--w-e-textarea-bg-color</span><span class="token punctuation">:</span> #1a202c<span class="token punctuation">;</span>

  <span class="token comment">/* 编辑区域文字颜色 */</span>
  <span class="token property">--w-e-textarea-color</span><span class="token punctuation">:</span> #e2e8f0<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

</code></pre></div><h2 id="vueuse"><a href="#vueuse" class="header-anchor">#</a> vueUse</h2> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> i @vueuse/core
</code></pre></div><p>提供大量方法、同时支持vue2、vue3<a href="https://vueuse.org/guide" target="_blank" rel="noopener noreferrer">gitHub<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h2 id="图片预览"><a href="#图片预览" class="header-anchor">#</a> 图片预览</h2> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> viewerjs
</code></pre></div><div class="language-vue extra-class"><pre class="language-vue"><code>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>less<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
<span class="token selector">#viewer</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
  <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>

  <span class="token selector">img</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>viewSrc<span class="token punctuation">&quot;</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">import</span> Viewer <span class="token keyword">from</span> <span class="token string">'viewerjs'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'viewerjs/dist/viewer.css'</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> singleImgViewer<span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">viewSrc</span><span class="token operator">:</span> <span class="token keyword">undefined</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">beforeDestroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">destroyViewJs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">initData</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">initViewJs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">initViewJs</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> container <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'viewer'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        singleImgViewer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Viewer</span><span class="token punctuation">(</span>container<span class="token punctuation">,</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">button</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          <span class="token literal-property property">navbar</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          <span class="token literal-property property">toolbar</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
          <span class="token literal-property property">container</span><span class="token operator">:</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'drawer'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 销毁图片预览实例对象</span>
    <span class="token function">destroyViewJs</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      singleImgViewer <span class="token operator">&amp;&amp;</span> singleImgViewer<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// 预览图片</span>
    <span class="token function">prevImage</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>viewSrc <span class="token operator">=</span> server<span class="token punctuation">.</span>api<span class="token punctuation">.</span>file<span class="token punctuation">.</span>download<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'{fileName}'</span><span class="token punctuation">,</span> item<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        singleImgViewer <span class="token operator">&amp;&amp;</span> singleImgViewer<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        singleImgViewer <span class="token operator">&amp;&amp;</span> singleImgViewer<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="时间处理"><a href="#时间处理" class="header-anchor">#</a> 时间处理</h2> <h3 id="moment"><a href="#moment" class="header-anchor">#</a> moment</h3> <div class="language-shell extra-class"><pre class="language-shell"><code>  <span class="token function">yarn</span>  <span class="token function">add</span>  moment<span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">moment</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">'YYYY-MM-DD'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">moment</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">'YYYY-MM-DD HH:mm:ss'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 时间戳做差，变为秒</span>
<span class="token function">moment</span><span class="token punctuation">(</span>endTimeStamp <span class="token operator">-</span> nowStamp<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token string">'X'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a href="http://momentjs.cn/" target="_blank" rel="noopener noreferrer">gitHub中文地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="day-js"><a href="#day-js" class="header-anchor">#</a> Day.js</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">yarn</span>  <span class="token function">add</span> dayjs
<span class="token function">npm</span> <span class="token function">install</span> dayjs <span class="token parameter variable">--save</span>
</code></pre></div><p><a href="https://github.com/iamkun/dayjs/" target="_blank" rel="noopener noreferrer">gitHub中文地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="西瓜视频"><a href="#西瓜视频" class="header-anchor">#</a> 西瓜视频</h2> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> xgplayer
</code></pre></div><div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>mse<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Player <span class="token keyword">from</span> <span class="token string">'xgplayer'</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> player <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Player</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">'mse'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">url</span><span class="token operator">:</span> <span class="token string">'//abc.com/**/*.mp4'</span><span class="token punctuation">,</span>
  <span class="token literal-property property">lang</span><span class="token operator">:</span> <span class="token string">'zh-cn'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="peer-js"><a href="#peer-js" class="header-anchor">#</a> peer.js</h2> <div class="language- extra-class"><pre class="language-text"><code>peer.js 基于webRTC实现即时通信
允许网页应用不通过中间服务器就能互相直接传输任意数据，比如视频流、音频流、文件流、普通数据等
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> peer.js
</code></pre></div><p><a href="https://peerjs.com/" target="_blank" rel="noopener noreferrer">gitHub中文地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 如果需要使用call先获取设备授权</span>
<span class="token keyword">var</span> getUserMedia <span class="token operator">=</span> navigator<span class="token punctuation">.</span>getUserMedia <span class="token operator">||</span> navigator<span class="token punctuation">.</span>webkitGetUserMedia <span class="token operator">||</span> navigator<span class="token punctuation">.</span>mozGetUserMedia<span class="token punctuation">;</span>
<span class="token function">getUserMedia</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">video</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token literal-property property">audio</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">stream</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span>  call <span class="token operator">=</span> <span class="token function">peer</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">'another-peers-id'</span><span class="token punctuation">,</span> stream<span class="token punctuation">)</span><span class="token punctuation">;</span>
  call<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'stream'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">remoteStream</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> video <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'video'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    video<span class="token punctuation">.</span>srcObject <span class="token operator">=</span> remoteStream<span class="token punctuation">;</span>
    video<span class="token punctuation">.</span>onloadedmetadata <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span> video<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Failed to get local stream'</span> <span class="token punctuation">,</span>err<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="ppt插件"><a href="#ppt插件" class="header-anchor">#</a> PPT插件</h2> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> init slidev@latest
</code></pre></div><p><a href="https://cn.sli.dev/guide/install.html#starter-template" target="_blank" rel="noopener noreferrer">gitHub中文地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="二维码生成"><a href="#二维码生成" class="header-anchor">#</a> 二维码生成</h2> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> vue-qr
</code></pre></div><div class="language-vue extra-class"><pre class="language-vue"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>vue-qr</span>
    <span class="token attr-name">:size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>180<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">:margin</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>0<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">:auto-color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>true<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">:dot-scale</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>1<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">:text</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">'</span>二维码信息'<span class="token punctuation">&quot;</span></span>
    <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>qrImage<span class="token punctuation">&quot;</span></span>
<span class="token punctuation">/&gt;</span></span>
</code></pre></div><p><a href="https://github.com/Binaryify/vue-qr" target="_blank" rel="noopener noreferrer">gitHub中文地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="html转换为canvas"><a href="#html转换为canvas" class="header-anchor">#</a> html转换为canvas</h2> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> <span class="token function">install</span> html2canvas
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">tansferHtmlToBlob</span> <span class="token operator">=</span>  <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token keyword">const</span> canvas <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">html2canvas</span><span class="token punctuation">(</span>qrContainer<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">dpi</span><span class="token operator">:</span> window<span class="token punctuation">.</span>devicePixelRatio <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">,</span>
      <span class="token literal-property property">width</span><span class="token operator">:</span> qrContainerWidth<span class="token punctuation">,</span>
      <span class="token literal-property property">height</span><span class="token operator">:</span> qrContainerHeight<span class="token punctuation">,</span>
      <span class="token literal-property property">scale</span><span class="token operator">:</span> <span class="token number">0.75</span><span class="token punctuation">,</span>
      <span class="token literal-property property">useCORS</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token function-variable function">ignoreElements</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> classNameList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'qrImage'</span><span class="token punctuation">,</span> <span class="token string">'qr-header-text'</span><span class="token punctuation">,</span> <span class="token string">'qr-footer-desc'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>classNameList<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>element<span class="token punctuation">.</span>className<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    canvas<span class="token punctuation">.</span>id <span class="token operator">=</span> <span class="token string">'myCanvas'</span><span class="token punctuation">;</span>
    <span class="token comment">// 将canvas转换为blob</span>
    canvas<span class="token punctuation">.</span><span class="token function">toBlob</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">contentDataURL</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
      <span class="token function">resolve</span><span class="token punctuation">(</span>contentDataURL<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p><a href="https://github.com/niklasvh/html2canvas" target="_blank" rel="noopener noreferrer">gitHub中文地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="组织树"><a href="#组织树" class="header-anchor">#</a> 组织树</h2> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">npm</span> i vue2-org-tree
</code></pre></div><div class="language-vue extra-class"><pre class="language-vue"><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>vue2-org-tree</span> <span class="token attr-name">:data</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span> 
                   <span class="token attr-name">:renderContent</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>renderContent<span class="token punctuation">&quot;</span></span>
                   <span class="token attr-name">@on-node-click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onNodeClick<span class="token punctuation">&quot;</span></span>
                   <span class="token attr-name">:horizontal</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span>
                   <span class="token attr-name">collapsable</span> 
                   <span class="token attr-name">@on-expand</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>onExpand<span class="token punctuation">&quot;</span></span>
    <span class="token punctuation">/&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ---&gt; renderContent使用是h函数返回vNode就可</span>
<span class="token comment">// ---&gt; 固定写法</span>
<span class="token function">onExpand</span><span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token string">'expand'</span> <span class="token keyword">in</span> data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    data<span class="token punctuation">.</span>expand <span class="token operator">=</span> <span class="token operator">!</span>data<span class="token punctuation">.</span>expand<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>data<span class="token punctuation">.</span>expand <span class="token operator">&amp;&amp;</span> data<span class="token punctuation">.</span>children<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">collapse</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>children<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$set</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token string">'expand'</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">collapse</span><span class="token punctuation">(</span><span class="token parameter">list</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  list<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">child</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>child<span class="token punctuation">.</span>expand<span class="token punctuation">)</span> child<span class="token punctuation">.</span>expand <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    child<span class="token punctuation">.</span>children <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">collapse</span><span class="token punctuation">(</span>child<span class="token punctuation">.</span>children<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><a href="https://github.com/hukaibaihu/vue-org-tree" target="_blank" rel="noopener noreferrer">gitHub中文地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="文件预览-pdf、excel、world"><a href="#文件预览-pdf、excel、world" class="header-anchor">#</a> 文件预览（pdf、excel、world）</h2> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment">#docx文档预览组件</span>
<span class="token function">npm</span> <span class="token function">install</span> @vue-office/docx vue-demi

<span class="token comment">#excel文档预览组件</span>
<span class="token function">npm</span> <span class="token function">install</span> @vue-office/excel vue-demi

<span class="token comment">#pdf文档预览组件</span>
<span class="token function">npm</span> <span class="token function">install</span> @vue-office/pdf vue-demi
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code>如果是vue2.6版本或以下还需要额外安装 @vue/composition-api
<span class="token function">npm</span> <span class="token function">install</span> @vue/composition-api
</code></pre></div><div class="language-vue extra-class"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>VueOfficeDocx</span> <span class="token attr-name">:src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>docx<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">height</span><span class="token punctuation">:</span> 100vh<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
<span class="token comment">//引入VueOfficeDocx组件</span>
<span class="token keyword">import</span> VueOfficeDocx <span class="token keyword">from</span> <span class="token string">'@vue-office/docx'</span>
<span class="token comment">//引入相关样式</span>
<span class="token keyword">import</span> <span class="token string">'@vue-office/docx/lib/index.css'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">components</span><span class="token operator">:</span><span class="token punctuation">{</span>
    VueOfficeDocx
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">docx</span><span class="token operator">:</span> <span class="token string">'http://static.shanhuxueyuan.com/test6.docx'</span> <span class="token comment">//设置文档网络地址，可以是相对地址</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><a href="https://github.com/501351981/vue-office" target="_blank" rel="noopener noreferrer">gitHub中文地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="流程图"><a href="#流程图" class="header-anchor">#</a> 流程图</h2> <div class="language- extra-class"><pre class="language-text"><code>
  npm install @antv/x6 --save
  import { Graph } from '@antv/x6';
</code></pre></div><p><a href="https://x6.antv.vision/en/docs/tutorial/getting-started" target="_blank" rel="noopener noreferrer">gitHub中文地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="讯飞插件"><a href="#讯飞插件" class="header-anchor">#</a> 讯飞插件</h2> <div class="language- extra-class"><pre class="language-text"><code>npm i @muguilin/xf-voice-dictation
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> XfVoiceDictation <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@muguilin/xf-voice-dictation'</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> times <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> xfVoice <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XfVoiceDictation</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token constant">APPID</span><span class="token operator">:</span> <span class="token string">'xxx'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">APISecret</span><span class="token operator">:</span> <span class="token string">'xxx'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">APIKey</span><span class="token operator">:</span> <span class="token string">'xxx'</span><span class="token punctuation">,</span>

    <span class="token comment">// webSocket请求地址 非必传参数，默认为：wss://iat-api.xfyun.cn/v2/iat</span>
    <span class="token comment">// url: '',</span>

    <span class="token comment">// 监听录音状态变化回调</span>
    <span class="token function-variable function">onWillStatusChange</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">oldStatus<span class="token punctuation">,</span> newStatus</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 可以在这里进行页面中一些交互逻辑处理：注：倒计时（语音听写只有60s）,录音的动画，按钮交互等！</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'识别状态：'</span><span class="token punctuation">,</span> oldStatus<span class="token punctuation">,</span> newStatus<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// 监听识别结果的变化回调</span>
    <span class="token function-variable function">onTextChange</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">text</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 可以在这里进行页面中一些交互逻辑处理：如将文本显示在页面中</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'识别内容：'</span><span class="token punctuation">,</span>text<span class="token punctuation">)</span>

        <span class="token comment">// 如果3秒钟内没有说话，就自动关闭（60s后也会自动关闭）</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>text<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">clearTimeout</span><span class="token punctuation">(</span>times<span class="token punctuation">)</span><span class="token punctuation">;</span>
            times <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment">// 监听识别错误回调</span>
    <span class="token function-variable function">onError</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'错误信息：'</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 给Dom元素加添事件，来调用开始语音识别！</span>
<span class="token comment">// xfVoice.start();</span>

<span class="token comment">// 给Dom元素加添事件，来调用关闭语音识别！</span>
<span class="token comment">// xfVoice.stop();</span>
</code></pre></div><h2 id="connect-camera"><a href="#connect-camera" class="header-anchor">#</a> Connect Camera</h2> <p><a href="https://github.com/648540858/wvp-GB28181-pro" target="_blank" rel="noopener noreferrer">gitHub中文地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <ul><li>This is open-source project for GB28181.
For front-end, You may need to play a video for your project.
This open-source provide a plugin, and you can use it directly to meet your requirements.
For back-end, It provides so many abilities that  you can move the position of the  Camera,
Pushing stream and pulling stream.Also, If you would like to get the project code.
you should browse the above address.</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"><!----></div></div>
    <script src="/vue-preess/assets/js/app.19476c11.js" defer></script><script src="/vue-preess/assets/js/2.f3b333de.js" defer></script><script src="/vue-preess/assets/js/1.f574d6f5.js" defer></script><script src="/vue-preess/assets/js/44.24cbf576.js" defer></script>
  </body>
</html>
